=================================================
Лабораторна робота №3
=================================================

Завдання
---------------------------------------------------------

* ознайомитись hrtimer
* на основі модулю з минулої лабораторної роботи створити модуль що буде мати такий самий
функціонал але замість звичайного таймеру будемо використовувати таймер високої роздільної здатності

Хід роботи
----------------------------------------------------------

**Написання модуля ядра**
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Згідно з отриманим завданням було створено модуль ядра що є переробкою модуля ядра з минулої лабораторної роботи тільки замість використаного в минулій роботі Timeout timer було використано HR timer.

у зв'язку з завданням потрібно використовувати HR timer по цій причині було створено змінну  ktime для виставлення значення expire, та звичайно замінено оброрбник переривань таймеру обробник перериванть HR таймеру повинен повертати змінну типу (enum) HRTIMER_RESTART або HRTIMER_NORESTART
при поверненні значення HRTIMER_RESTART таймер запускається повторно після завершення роботи обробника в іншому випадку таймер повторно не активується. Для зазначеня часу відпрацювання таймеру була використана функція
``hrtimer_forward`` зартимка задається за допомогую типа данних ktime_t за для переводу секунд до цього типу данних використовуємо функцію ktime_set(). Та також видалення HR таймеру відбувається за допомогою функції ``hrtimer_cancel``

Тести та демонстрація hrtimer в порівняні Timeout timer:

.. code-block:: bash

 / # insmod /mnt/hrtimer.ko cnt=10 delay=10
 [  177.620896] 10 msec is 10 jiffies
 [  177.622013] Init jiffies is 4294844820
 [  177.622977] Tasklet jiffies 4294844821
 / # [  177.633006] Iteration 0
 [  177.643042] Iteration 1
 [  177.653056] Iteration 2
 [  177.663008] Iteration 3
 [  177.673007] Iteration 4
 [  177.683057] Iteration 5
 [  177.693059] Iteration 6
 [  177.703052] Iteration 7
 [  177.713020] Iteration 8
 [  177.723014] Iteration 9
 / # rmmod hrtimer
 [  211.924390] Exit jiffies is 4294879123
 [  211.925471] Array[0] = 4294844832
 [  211.926401] Array[1] = 4294844841
 [  211.927310] Array[2] = 4294844851
 [  211.928157] Array[3] = 4294844861
 [  211.928989] Array[4] = 4294844871
 [  211.929839] Array[5] = 4294844881
 [  211.930797] Array[6] = 4294844891
 [  211.931716] Array[7] = 4294844901
 [  211.932632] Array[8] = 4294844911
 [  211.933554] Array[9] = 4294844921
 [  211.934669] Ave Kernel!
 / # 

Висновки
------------
в результаті роботи було перероблено свій модуль ядра з лабораторнрої роботи №2 заміною таймеру на hr таймер. 
З особливестей які одразу видно таймер високої роздільної здатності має набагато більшу точність, це зумовлено тим що роздільна здатність hr таймерів mk-n секунди а в  timer wheel
міньімальноможлива роздільна здатність- 3ms така велика різниця в точності викликана призначенням цих таймерів timer wheel використовуються на приклад для визначення таймаутів 
очікування а таймери високої роздільної здатності використовують наприклад для генерації ШІМ сигналу. 
